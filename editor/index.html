<!doctype html>
<html>
<head>
	<title>Orry Baram: Front End Development</title>
	
	<link rel="stylesheet" href="css/codemirror.css">
	<link rel="stylesheet" href="css/monokai.css">
	<link rel="stylesheet" href="css/style.css">
	<link href='http://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>

</head>
<body>

<div class="container grid">
	<form>
		<div class="input-area">
			<h2>html</h2>
			<textarea id="html"><h1>Hello!</h1>
<h2>My name is Orry and I'm a front end developer.</h2>
<h3>I'm currently living in Brooklyn and working at <a target="_blank" href="http://thetrustedinsight.com">TrustedInsight</a>.</h3>
<h3>Previous Projects:</h3>
<ul>
	<li><a target="_blank" href="http://safeisfast.com">Safe is Fast</a> -- Front end Development and Design</li>
	<li><a target="_blank" href="http://www.bergfurniture.com">Berg Furniture</a> -- Development and Design (no longer maintained)</li> 
</ul>	

 			</textarea>
 		</div>
 		
 		<div class="input-area">
			<h2>css</h2>
			<textarea id="css">body {
	overflow:hidden;
	font-family: sans-serif;
	padding: 25px;
	background-image: url('http://www.orryb.com/editor/images/noise.png');
	background-color: #F1F1F1;
	color: #43473D;
	text-shadow: 0 1px white;
}

			</textarea>
		</div>
	</form>
</div>

<div class="output grid">
	<iframe></iframe>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>

<script src="livereload.js"></script>

<script src="js/codemirror.js"></script>
<script src="js/css.js"></script>
<script src="js/htmlmixed.js"></script>
<script src="js/javascript.js"></script>
<script src="js/xml.js"></script>

<script>
(function() {
	//$('.grid').height( $(window).height() );	

	var	contents = $('iframe').contents(),
		body = contents.find('body'),
		styleTag = $('<style></style>').appendTo(contents.find('head')),
		initial_html = $('#html').val(),
		initial_css = $('#css').val();

	body.html(initial_html);
	styleTag.text(initial_css);

	$('textarea').keyup(function() {
		var $this = $(this);
		if ( $this.attr('id') === 'html') {
			body.html( $this.val() );
			console.log($this.val());

		} else {
			// it had to be css
			styleTag.text( $this.val() );
		}
	});



	var htmlEditor = CodeMirror.fromTextArea(document.getElementById("html"), {
		mode: "text/html", 
		tabMode: "indent",
		theme: "monokai",
		lineWrapping: true,
		onChange: function() {
			body.html( htmlEditor.getValue() );
		}
	});

	var cssEditor = CodeMirror.fromTextArea(document.getElementById("css"), {
		mode: "text/css", 
		tabMode: "indent",
		theme: "monokai",
		lineWrapping: true,
		onChange: function() {
			console.log(cssEditor.getValue());
			styleTag.text( cssEditor.getValue() );
		}
	});

	console.log();    


})();

</script>

</body>
</html>